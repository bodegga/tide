# Tide Gateway - Docker Compose
# ==============================
# Start: docker-compose up -d
# Stop:  docker-compose down
#
# Exposes:
#   - SOCKS5 proxy on localhost:9050
#   - DNS on localhost:5353

services:
  tide:
    build: .
    container_name: tide-gateway
    restart: unless-stopped
    ports:
      - "9050:9050"   # SOCKS5 proxy
      - "9053:5353/udp"   # DNS over Tor (mapped to 9053 to avoid macOS conflict)
    healthcheck:
      test: ["CMD", "nc", "-z", "127.0.0.1", "9050"]
      interval: 30s
      timeout: 10s
      retries: 3
